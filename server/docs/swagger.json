{
    "swagger": "2.0",
    "info": {
        "description": "This is cxy api docs.",
        "title": "视频 API",
        "contact": {
            "url": "https://github.com/swaggo/swag/blob/master/README_zh-CN.md"
        },
        "license": {
            "name": "Apache 2.0"
        },
        "version": "1.0"
    },
    "host": "localhost:8811",
    "basePath": "/",
    "paths": {
        "/interaction/barrage": {
            "get": {
                "description": "通过表单提交获取弹幕",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "弹幕获取",
                "operationId": "GetBarrage",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "视频id",
                        "name": "VideoId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetBarrageResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "通过表单提交弹幕",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "弹幕发送",
                "operationId": "Barrage",
                "parameters": [
                    {
                        "type": "integer",
                        "description": " 弹幕所属视频的ID",
                        "name": "VideoID",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "弹幕内容",
                        "name": "Content",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "弹幕颜色",
                        "name": "Color",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "弹幕出现的时间戳",
                        "name": "Timestamp",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/interaction/comment": {
            "get": {
                "description": "通过表单提交查看评论列表",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "视频评论列表",
                "operationId": "GetComment",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "视频id",
                        "name": "VideoId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetCommentResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "通过表单提交创建评论",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "创建评论",
                "operationId": "CommentCreateReq",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "视频id",
                        "name": "VideoId",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "内容",
                        "name": "Content",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/interaction/fav": {
            "put": {
                "description": "通过表单提交将视频加入收藏夹",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "加入收藏夹",
                "operationId": "FavlistAdd",
                "parameters": [
                    {
                        "description": "想要添加的视频id和文件夹id",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/types.FavlistAddReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "通过表单提交将视频移除收藏夹",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "视频移除收藏夹",
                "operationId": "FavlistDel",
                "parameters": [
                    {
                        "type": "string",
                        "description": "收藏夹id",
                        "name": "FavlistId",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "视频id",
                        "name": "VideoId",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/interaction/favlist": {
            "get": {
                "description": "通过表单提交方式查看收藏夹",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "交互"
                ],
                "summary": "查看收藏夹",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户id",
                        "name": "uid",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "收藏夹id",
                        "name": "id",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetFavlistResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "通过表单提交创建收藏夹",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "创建收藏夹",
                "operationId": "FavlistCreate",
                "parameters": [
                    {
                        "type": "string",
                        "description": "收藏夹名称",
                        "name": "FavlistName",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "收藏夹类型，1为公开 2为隐藏",
                        "name": "Type",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "通过表单提交删除收藏夹",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "删除收藏夹",
                "operationId": "DelFavlist",
                "parameters": [
                    {
                        "type": "string",
                        "description": "收藏夹id",
                        "name": "FavlistId",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/interaction/favorite": {
            "get": {
                "description": "通过表单提交方式查看喜欢列表",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "喜欢列表",
                "operationId": "GetFavorite",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户id",
                        "name": "UserId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetFavoriteResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "通过表单提交点赞/取消赞",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "点赞/取消赞",
                "operationId": "Favorite",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "视频id",
                        "name": "VideoId",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "1点赞 2取消",
                        "name": "Type",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/user/action": {
            "post": {
                "description": "通过表单提交进行关注/取关",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "用户关注/取关",
                "operationId": "UserAction",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "对方用户id",
                        "name": "user_id",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/user/login": {
            "post": {
                "description": "通过对方id和我的token获取对方用户信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "用户信息",
                "operationId": "UserInfo",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "对方用户ID",
                        "name": "id",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/user/register": {
            "post": {
                "description": "通过表单提交创建用户",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "创建用户",
                "operationId": "UserRegister",
                "parameters": [
                    {
                        "type": "string",
                        "description": "用户名",
                        "name": "username",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "密码",
                        "name": "password",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/video/channel": {
            "get": {
                "description": "通过表单提交获取该分类的视频",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "视频分类",
                "operationId": "VideoChannel",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "分类id",
                        "name": "channel_id",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetFavResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/video/publish/action": {
            "put": {
                "description": "通过表单提交用户发布的视频",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "用户视频更新",
                "operationId": "VideoUpdatePublish",
                "parameters": [
                    {
                        "description": "更新后的视频信息",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/types.VideoUpdatePublish"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "通过表单提交创建用户",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "创上传视频",
                "operationId": "VideoCreate",
                "parameters": [
                    {
                        "type": "string",
                        "description": "用户名",
                        "name": "username",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "密码",
                        "name": "password",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "封面",
                        "name": "image",
                        "in": "formData"
                    },
                    {
                        "type": "file",
                        "description": "视频",
                        "name": "video",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/video/publish/list": {
            "get": {
                "description": "通过表单获取该用户发布的视频",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "用户视频列表",
                "operationId": "VideoGetPublish",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户id",
                        "name": "user_id",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetFavResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/video/search": {
            "get": {
                "description": "通过表单提交进行视频搜索",
                "consumes": [
                    "application/x-www-form-urlencoded"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "视频搜索",
                "operationId": "VideoSearch",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "关键字",
                        "name": "text",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/types.GetFavResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "api.ErrorResponse": {
            "type": "object",
            "properties": {
                "data": {},
                "error": {
                    "type": "string"
                },
                "msg": {
                    "type": "string"
                },
                "status": {
                    "type": "integer"
                }
            }
        },
        "api.Response": {
            "type": "object",
            "properties": {
                "data": {},
                "error": {
                    "type": "string"
                },
                "msg": {
                    "type": "string"
                },
                "status": {
                    "type": "integer"
                }
            }
        },
        "types.FavlistAddReq": {
            "type": "object",
            "properties": {
                "favlist_id": {
                    "type": "integer"
                },
                "video_id": {
                    "type": "integer"
                }
            }
        },
        "types.GetBarrageResp": {
            "type": "object",
            "properties": {
                "color": {
                    "description": "弹幕颜色",
                    "type": "string"
                },
                "content": {
                    "description": "弹幕内容",
                    "type": "string"
                },
                "timestamp": {
                    "description": "弹幕出现的时间戳",
                    "type": "integer"
                }
            }
        },
        "types.GetCommentResp": {
            "type": "object",
            "properties": {
                "avatar": {
                    "description": "用户头像",
                    "type": "string"
                },
                "content": {
                    "description": "评论内容",
                    "type": "string"
                },
                "create_date": {
                    "description": "评论发布日期，格式 mm-dd",
                    "type": "string"
                },
                "user_name": {
                    "description": "用户名",
                    "type": "string"
                }
            }
        },
        "types.GetFavResp": {
            "type": "object",
            "properties": {
                "author_name": {
                    "description": "视频作者",
                    "type": "string"
                },
                "category_id": {
                    "description": "视频所属领域",
                    "type": "string"
                },
                "collection_count": {
                    "description": "视频总收藏数",
                    "type": "integer"
                },
                "cover_url": {
                    "description": "视频封面地址",
                    "type": "string"
                },
                "create_time": {
                    "description": "视频创建时间",
                    "type": "integer"
                },
                "favorite_count": {
                    "description": "视频的点赞总数",
                    "type": "integer"
                },
                "play_url": {
                    "description": "播放地址",
                    "type": "string"
                },
                "title": {
                    "description": "视频标题",
                    "type": "string"
                }
            }
        },
        "types.GetFavlistResp": {
            "type": "object",
            "properties": {
                "collection_name": {
                    "description": "收藏夹名",
                    "type": "string"
                },
                "create_time": {
                    "type": "integer"
                },
                "favlist": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/types.GetFavResp"
                    }
                },
                "total": {
                    "type": "integer"
                },
                "user_name": {
                    "description": "收藏夹创建人",
                    "type": "string"
                }
            }
        },
        "types.GetFavoriteResp": {
            "type": "object",
            "properties": {
                "author_name": {
                    "description": "视频作者",
                    "type": "integer"
                },
                "collection_count": {
                    "description": "播放总数",
                    "type": "integer"
                },
                "cover_url": {
                    "description": "视频封面地址",
                    "type": "string"
                },
                "title": {
                    "description": "视频标题",
                    "type": "string"
                }
            }
        },
        "types.Response": {
            "type": "object",
            "properties": {
                "data": {},
                "error": {
                    "type": "string"
                },
                "msg": {
                    "type": "string"
                },
                "status": {
                    "type": "integer"
                }
            }
        },
        "types.VideoUpdatePublish": {
            "type": "object",
            "properties": {
                "category_id": {
                    "description": "视频所属领域",
                    "type": "integer"
                },
                "title": {
                    "description": "视频标题",
                    "type": "string"
                },
                "video_id": {
                    "description": "视频id",
                    "type": "integer"
                }
            }
        }
    }
}